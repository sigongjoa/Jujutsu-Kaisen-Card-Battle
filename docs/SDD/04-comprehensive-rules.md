# SDD 04: Comprehensive Rules (종합 규칙)

**문서 분류**: SDD (Software Design Document)
**작성자**: Game Rules Committee
**최종 업데이트**: 2025-11-30
**상태**: Production Ready

---

## 1. 종합 규칙 개요

이 문서는 게임의 **모든 상황에 대한 판정 기준**을 정의합니다.
심판(Judge)과 하드코어 플레이어가 참고하는 **게임 규칙의 법전**입니다.

---

## 2. 우선순위 시스템 (Stack & Priority)

### 2.1 스택(Stack) 개념

```
게임에서 여러 효과가 동시에 발생할 때의 처리 순서

예시:
Player A: 유토 김 플레이 → "비의 자" 발동 (저추물 파괴)
Player B: 즉시 반응 → "카운터 주술" 발동 (저추물 보호)

처리 순서:
최상단 → [카운터 주술] ← 가장 최근 (먼저 처리)
        [비의 자]
하단 → [유토 김 플레이] ← 처음 (나중에 처리)
```

### 2.2 우선순위 규칙 (Priority System)

```
┌─────────────────────────────────────────┐
│  우선순위 순서 (높을수록 먼저 처리)      │
├─────────────────────────────────────────┤
│ 1. 반응 카드 (RESPONSE) - 가장 높음     │
│    └─ 상대가 플레이한 직후 즉시 반응    │
│                                         │
│ 2. 플레이어 능력 - 중간                │
│    └─ 플레이어가 선택한 능력            │
│                                         │
│ 3. 수동 능력 (PASSIVE) - 가장 낮음     │
│    └─ 자동으로 발동되는 능력            │
│                                         │
│ (같은 우선순위 내에서: 가장 최근 카드) │
└─────────────────────────────────────────┘
```

### 2.3 스택 해석 예시

```
상황:
Player A가 "유토 김" 플레이
  ├─ 능력: "비의 자" (상대 저주물 파괴)

Player B가 즉시 "반응" 발동
  ├─ 카드: "신비한 보호막"
  └─ 효과: "한 저추물을 이번 턴 파괴당할 수 없게 한다"

규칙 적용:
1. "신비한 보호막"이 스택 최상단 (가장 최근)
   → 먼저 처리 → 저추물 1개 보호

2. "비의 자"가 처리됨
   → 보호된 저추물은 파괴 불가
   → 다른 저추물이 있으면 그것을 파괴
   → 없으면 효과 무시

결과: 보호막이 효과적으로 작동
```

---

## 3. 손상(Damage) 계산의 모든 경우

### 3.1 전투 손상 계산

```
기본 공식:
손상 = 공격자의 공격력 - 방어자의 방어력(기본 0)

예시 1: 일반 전투
┌────────────────────────────────┐
│ 공격자: 공격력 3인 저추술사     │
│ 방어자: 블록 선택              │
│ 결과:                          │
│  - 공격자 → 손상 3 입음        │
│  - 방어자 → 공격자 공격력 입음 │
└────────────────────────────────┘

예시 2: 특수 능력
┌────────────────────────────────┐
│ 주술: "대알" (손상 3)          │
│ 효과: 상대 저추술사에게 3 손상 │
│ 방어: 없음 (주술은 방어 불가)  │
│ 결과: 3 손상 확정              │
└────────────────────────────────┘
```

### 3.2 특수 전투 규칙

#### 관통(Piercing)
```
정의: 초과 손상이 플레이어에게 직접 입혀짐

예시:
공격자: 공격력 5, 관통 능력 보유
방어자: 저추술사, 체력 3으로 블록

계산:
- 방어자는 5 손상 입음
- 체력 3이므로 3을 받음 → 무력화
- 초과 손상 2는 플레이어가 입음

결과: 저추술사 제거 + 플레이어 2 손상
```

#### 회피(Evasion)
```
정의: 이 저추술사는 블록당할 수 없음

예시:
공격자: 공격력 2, 회피 능력
방어자: 저추술사 2개 필드에 있음

규칙:
- 방어자가 회피 카드로 블록 시도
- 규칙상 블록 불가
- 플레이어가 직접 손상 입음

결과: 블록 불가, 2 손상 강제
```

#### 불굴(Indestructible)
```
정의: 전투 손상을 받지 않음

예시:
공격자: 공격력 5
방어자: 체력 2, 불굴 능력

전투 결과:
- 방어자는 5 손상 입어야 함
- 불굴 능력이 2 손상 방어
- 방어자는 생존

다음 턴:
- 불굴은 효과 지속
- 다시 블록 가능
```

#### 생명력 흡수(Lifelink)
```
정의: 입힌 손상만큼 HP 회복

예시:
공격자: 공격력 3, 생명력 흡수
방어자: 블록 선택

결과:
- 공격자가 3 손상 입음
- 공격자가 3만큼 회복
- 방정자는 손상 없음
- 공격자의 HP는 변화 없음

효과: 생존력 증대
```

---

## 4. 카드 플레이 순서의 상세 규칙

### 4.1 저주술사 소환의 시점

```
Player A의 턴:

[메인 단계 A 시작]
  ↓
Player A: "유토 김" 플레이 선언
  ↓
[스택에 올라감]
  ↓
Player B: 반응하겠는가? (O/X)
  - O: 반응 카드 플레이 가능
  - X: 계속 진행
  ↓
[반응 없으면 해결]
  ↓
1. 유토 김이 필드에 진입
2. "비의 자" 수동 능력 발동
   - 상대의 저추물 1개 제거
3. 플레이어 B의 상태 업데이트

[메인 단계 A 계속]
```

### 4.2 메인 단계 A와 B의 차이

```
메인 단계 A (턴 초반):
┌─────────────────────────────────┐
│ • 저추술사 소환: O (최대 1명)   │
│ • 주술/저추물: O (무제한)       │
│ • 능력 발동: O                 │
│ • 공격: X (아직)               │
└─────────────────────────────────┘

메인 단계 B (전투 후):
┌─────────────────────────────────┐
│ • 저추술사 소환: O (최대 1명)   │
│ • 주술/저추물: O (무제한)       │
│ • 능력 발동: O                 │
│ • 공격: X (이미 했음)          │
└─────────────────────────────────┘

차이점:
→ 둘 다 거의 같음
→ 플레이어의 전략적 선택 (A에서 강하게 or B에서 마무리)
```

---

## 5. 동시 발생 효과의 해결

### 5.1 동시성 문제 예시

```
상황:
두 저추술사가 동시에 모두 3 이상 손상을 입음
→ 동시에 무력화되어야 하는가? 순차적으로?

규칙:
"동시 발생 효과는 활성화된 순서대로 처리"
→ 즉, 스택의 맨 위부터

구현:
1. 가장 최근 이벤트부터 처리
2. 모두 큐(Queue)에 들어감
3. FIFO(First In First Out) 순서로 처리
```

### 5.2 무한 루프 방지

```
문제 상황:
A의 능력이 B를 발동
B의 능력이 A를 발동
→ 무한 루프!

규칙:
1. 같은 효과 조합은 최대 3회까지만 반복
2. 그 이상은 자동 종료
3. 플레이어가 의도적으로 선택한 경우:
   - 무한 루프 선언 가능
   - 루프 횟수를 원하는 대로 설정
   - "유토 김을 10번 뽑겠습니다" 등

예시:
```
Card A: "이 저추술사가 뽑아질 때마다 저추력 1 회복"
Card B: "저추력이 회복될 때마다 카드 1장 뽑기"

무한 루프 가능:
A 뽑기 → 저추력 회복 → B 발동 → 카드 뽑기 → A 뽑기 → ...

규칙: 이런 루프는 플레이어가 몇 번 반복할지 선언 후 종료
```

---

## 6. 게임 상태의 특수한 경우

### 6.1 손상이 0 이하가 되는 경우

```
Player의 HP가 음수가 될 수 있는가?

규칙: NO
→ 0 이하가 되는 즉시 게임 종료
→ 정확한 개수는 계산하지 않음
→ "3 이상 손상"도 "10 손상"도 같음

예: HP 5일 때 7 손상 입음
→ HP = -2 아님
→ HP = 0 (게임 종료)
```

### 6.2 카드를 뽑을 수 없는 경우

```
덱에 카드가 없는데 뽑아야 한다면?

상황 1: 정상적인 드로우 페이즈에 없음
규칙: 즉시 게임 종료 (패배)

상황 2: 능력으로 뽑아야 하는데 없음
규칙 1: "덱에 카드가 남아있을 때까지" 해석
규칙 2: 그 능력은 부분 실행
예: "카드 5장 뽑기" → 덱에 2장만 남음 → 2장만 뽑음
```

### 6.3 손패 상한선 초과

```
규칙: 손패는 무제한이 아님

시각적 제약: 최대 10장까지 표시
더 많으면: 스크롤 또는 좌우 화살표로 표시

턴 종료 시: 손패 확인
- 5장 초과라면?
- 플레이어가 선택해서 초과분을 무덤으로 보냄
- 의무사항 (선택 아님)

예: 손패 8장 → 3장 초과
→ 3장을 선택해서 무덤으로
→ 최종 5장
```

---

## 7. 특별한 상황에서의 판정

### 7.1 저주술사가 장착할 수 있는 저주물의 개수

```
규칙: 저추술사 1명당 최대 3개까지

예시:
Field:
┌──────┐  ┌──────┐  ┌──────┐
│유토김 │  │메이   │  │   (빈칸) │
└──────┘  └──────┘  └──────┘
  ↓ 장착    ↓ 장착
[검][검]  [갑옷]

유토 김: 검 2개 장착 (가능, 2 < 3)
메이: 갑옷 1개 장착 (가능, 1 < 3)
추가: 유토 김에 3번째 아이템 추가?
→ 가능 (총 3개)
→ 4번째는 불가능
```

### 7.2 필드의 저주술사 개수 제한

```
규칙: 최대 3명

저추술사 소환 시도:
필드에 이미 3명 있음
→ 새로운 저추술사 소환 불가
→ "필드가 가득 찼습니다" 에러

해결책:
1. 기존 저추술사 제거
2. 또는 다른 저추술사를 교체 카드로 사용

예:
"이 효과로 저추술사를 소환할 때, 기존 저추술사 1명을 버릴 수 있다"
→ 이런 효과가 있으면 4명째도 가능
```

---

## 8. 토너먼트 규정

### 8.1 덱 구성 규칙 (공식 토너먼트)

```
최소 카드: 40장
최대 카드: 60장

같은 이름 카드:
- 일반 카드: 최대 3장
- 특수 카드 (하이라이트): 최대 1장

금지된 카드:
- 회전식 금지 리스트 (월간 업데이트)
- 예: "과도하게 강력한 카드"는 임시 금지

추천되는 덱 구성:
- 저추술사: 12~15장
- 주술: 15~20장
- 저추물: 8~12장
- 사건/반응: 4~8장
```

### 8.2 게임 진행 규칙

```
시간 제한: 40분 (게임 하나)

초과할 경우:
- 경고 1회
- 2회 초과: 패배 처리

사이드보드 교환: 게임 사이에 최대 15장 교체 가능

행동 속도:
- 빠른 플레이 권장
- 의도적으로 시간 끌기 = 패널티
```

### 8.3 심판(Judge) 가이드라인

```
플레이어 분쟁 발생 시:

Level 1: 친절한 재설명
"스택의 순서는 이렇게 해석됩니다"

Level 2: 공식 규칙 적용
"종합 규칙 5.2절에 따르면..."

Level 3: 게임 상태 재설정
"현재 상태를 이렇게 정정합니다"

Level 4: 패배 처리
"반복적인 규칙 위반으로 인한 패배"
```

---

## 9. 자주 묻는 질문 (FAQ)

### Q1: 반응 카드를 연쇄로 플레이할 수 있는가?
A: 네, 가능합니다. 스택에 올라오며 역순으로 처리됩니다.

### Q2: 무력화된 저추술사는 그 턴에 다시 소환할 수 있는가?
A: 네, 가능합니다. 다른 저추술사로 취급됩니다.

### Q3: 저추물이 아닌 주술도 수정 능력을 받을 수 있는가?
A: 아니요, 주술은 즉시 해결되므로 지속적인 버프/약화를 받을 수 없습니다.

### Q4: 게임 중 규칙을 모르는 카드를 발견했다면?
A: 심판을 부르세요. 심판이 규칙을 설명하고 게임을 진행합니다.

### Q5: 드로우 페이즈에 뽑을 카드가 없으면?
A: 즉시 게임 종료. 패배입니다.

---

## 10. 종합 규칙 업데이트 정책

```
월간 업데이트 (첫 금요일):
- 새로운 카드에 대한 해석
- 발견된 버그 및 루프홀 수정
- 토너먼트 금지 카드 발표

긴급 핫픽스 (필요시):
- 게임을 심각하게 왜곡하는 버그
- 보안 취약점
- 마치 손상되는 카드 조합
```

---

**중요**: 이 종합 규칙은 심판과 경쟁 플레이어만 필요합니다.
일반 플레이어는 `SDD/03-rulebook.md` (플레이어용 교육 룰북)을 참고하세요.
